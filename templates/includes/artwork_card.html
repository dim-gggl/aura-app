{% comment %}
Snippet pour les cartes d'œuvres d'art

Variables attendues :
- artwork: L'objet œuvre d'art
- show_actions: Boolean pour afficher les actions (optionnel, défaut: True)
- show_details: Boolean pour afficher les détails (optionnel, défaut: True)
- size: Taille de la carte (optionnel, défaut: "normal")
{% endcomment %}

{% load placeholder_extras %}

<div class="card h-100">
    {% if artwork.photos.exists %}
        <img src="{{ artwork.photos.first.image_thumbnail.url }}" 
             class="card-img-top" 
             alt="{{ artwork.title|default:'Œuvre' }}"
             loading="lazy" decoding="async" width="300" height="200"
             style="height: 200px; object-fit: cover;">
    {% else %}
        <img src="{% random_placeholder_url 300 200 forloop.counter0 %}"
             class="card-img-top" alt="Image de remplacement"
             width="300" height="200" loading="lazy" decoding="async"
             style="height: 200px; object-fit: cover;">
    {% endif %}
    
    <div class="card-body">
        <h6 class="card-title">
            {% if artwork.title %}
                {{ artwork.title }}
            {% else %}
                <em>Œuvre sans titre</em>
            {% endif %}
        </h6>
        
        {% if show_details|default:True %}
            {% if artwork.artists.exists %}
                <p class="card-text text-muted">
                    <small>
                        {% for artist in artwork.artists.all %}
                            {{ artist.name }}{% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    </small>
                </p>
            {% endif %}
            
            {% if artwork.creation_year %}
                <p class="card-text">
                    <small class="text-muted">{{ artwork.creation_year }}</small>
                </p>
            {% endif %}
            
            {% if artwork.art_type %}
                <p class="card-text">
                    <small class="text-muted">{{ artwork.art_type }}</small>
                </p>
            {% endif %}
        {% endif %}
    </div>
    
    {% if show_actions|default:True %}
        <div class="card-footer">
            {% with view_url='artworks:artwork_detail' edit_url='artworks:artwork_update' delete_url='artworks:artwork_delete' pk=artwork.pk size="sm" %}
                {% include 'includes/action_buttons.html' %}
            {% endwith %}
        </div>
    {% endif %}
</div>
